<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>

    function computerPlay(){
      let choice  = Math.random()
      if (choice > .666){
        return "rock";
      }
      else if (choice >.333){
        return "paper";
      }
      else{
        return "scissors";
      }
    }

    function playRound(playerSelection, computerSelection){
      playerSelection = playerSelection.toLowerCase();
      if (playerSelection == "rock"){
        switch (computerSelection){
          case "rock":
            return "Tie! You both played Rock"
          case "paper": 
            return "You lose! Paper beats Rock"
          case "scissors":
            return "You win! Rock beats Scissors"
        }
      }
      else if (playerSelection == "paper"){
        switch (computerSelection){
          case "rock":
            return "You win! Paper beats Rock"
          case "paper": 
            return "Tie! You both played Paper"
          case "scissors":
            return "You lose! Scissors beats Paper"
        }
      }
      else if (playerSelection == "scissors"){
        switch (computerSelection){
          case "rock":
            return "You lose! Rock beats Scissors"
          case "paper": 
            return "You win! Scissors beats Paper"
          case "scissors":
            return "Tie! You both played Scissors"
        }
      }
    }

    function promptPlayer(){
      let playerSelection = prompt("Choose Rock, Paper, or Scissors");
      while (!(playerSelection.toLowerCase() == "rock" || playerSelection.toLowerCase() == "paper" || playerSelection.toLowerCase() == "scissors")){
        playerSelection = prompt("I didn't understand that. Rock, Paper, or Scissors?");
      }
      return playerSelection;
    }
    let playerSelection = 'rock';
    let computerSelection = computerPlay();
    let playerScore = 0;
    let computerScore = 0;
    let result;
    let numGames = 0;

    function game(){
      playerSelection = promptPlayer();
      computerSelection = computerPlay();
      
      result = playRound(playerSelection,computerSelection)
      if (result.includes("win")){
        playerScore++;
      }
      else if (result.includes("lose")){
        computerScore++;
      }
      console.log(result)
      console.log("Player Score: " + playerScore + ", Computer Score: " + computerScore);
      if (numGames < 4){
        numGames++;
        game();
      }
      else{
        if (playerScore > computerScore){
          console.log("You win!");
        }
        else if (playerScore < computerScore){
          console.log("You lose!");
        }
        else{
          console.log("Tie!")
        }
        playAgain = prompt("Want to play again? y/n")
        if (playAgain.toLowerCase() == "y"){
          numGames = 0;
          playerScore = 0;
          computerScore =0;
          game();
        }
      }
    }

    game()

    
  </script>
</body>
</html>
